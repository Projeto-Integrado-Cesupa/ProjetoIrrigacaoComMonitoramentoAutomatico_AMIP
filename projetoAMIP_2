#include <LiquidCrystal_I2C.h>
LiquidCrystal_I2C lcd(0x27, 16, 2);

#include <DHT22.h>
#define pinDATA 2 
DHT22 dht22(pinDATA);

#define PIN_SensorUmidadeSolo A3

String mensagem1;
String mensagem2;

void setup(){  
  lcd.init();
	lcd.backlight();
  pinMode(PIN_SensorUmidadeSolo, INPUT);
	Serial.begin(9600);  
  }
 
void loop(){ 
  temperatura(); 
  umidadeDoAr();
  display();  
  Serial.println(""); 
  umidadeDaTerra(); 
  display();    
}

void umidadeDaTerra(){  
  int umidade = analogRead(PIN_SensorUmidadeSolo);
  int porcento = map(umidade, 0, 1023, 100, 0);
  mensagem1 ="Umidade do Solo:";
  mensagem2 = String(porcento)+"%";
}

void umidadeDoAr() {
  int h = dht22.getHumidity();
  mensagem1 = "Umidade do Ar: ";
  mensagem2 = String(h) + "%";
}

void temperatura() {
  int t = dht22.getTemperature();
  mensagem2 = String(t);
  lcd.setCursor(0,0); 
  lcd.print("Temperatura:"); 
  lcd.setCursor(0,1);           
  lcd.print(mensagem2);
  lcd.write(B11011111);
  lcd.print("C");
  delay(3000);
  lcd.clear();     
}

void display() {
  lcd.setCursor(0,0);          
  lcd.print(mensagem1); 
  lcd.setCursor(0,1);           
  lcd.print(mensagem2);
  delay(3000);
  lcd.clear();
}
