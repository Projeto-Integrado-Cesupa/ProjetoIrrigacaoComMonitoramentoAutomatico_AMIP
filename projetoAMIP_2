#include<LiquidCrystal.h>
#include <dht.h>
#define PIN_Cooler 8
dht DHT;

#define PIN_SensorUmidadeSolo A0
#define PIN_SensorDHT11 7
#define PIN_Cooler 8 //LED
#define Pin_Button 9

String mensagem1;
String mensagem2;
bool estado = 0;

LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

void setup(){  
  pinMode(PIN_SensorUmidadeSolo, INPUT);
	pinMode(PIN_Cooler, OUTPUT);
  pinMode(Pin_Button, INPUT_PULLUP);
  lcd.begin(16, 2);
	Serial.begin(9600);
  delay(1000);    
  }
 
void loop(){ 
  if (digitalRead(Pin_Button == LOW))
  {
    estado = !estado; 
    digitalWrite(PIN_Cooler, estado);
    while (digitalRead(Pin_Button) == LOW){};
    delay(100);
  }
  
  temperatura(); 
  umidadeDoAr();
  display();  
  Serial.println(""); 
  umidadeDaTerra(); 
  display();    
}

void umidadeDaTerra(){  
  int umidade = analogRead(PIN_SensorUmidadeSolo);
  Serial.print("Umidade do solo analogica: ");
  Serial.println(umidade); 
  int porcento = map(umidade, 0, 1023, 100, 0);
  Serial.println("Umidade do solo percente:  "+ String(porcento)+" %");
  mensagem1 ="Umidade do Solo:";
  mensagem2 = String(porcento)+"%";
}

void umidadeDoAr() {
  DHT.read11(PIN_SensorDHT11);
  int hum = DHT.humidity;
  Serial.println("Umidade do Ar:             " + String(hum)+" %");
  mensagem1 = "Umidade do Ar:";
  mensagem2 = String(hum) + "%";
}

void temperatura() {
  DHT.read11(PIN_SensorDHT11);
  int temp = DHT.temperature;
  Serial.println("Temperatura:               " + String(temp)+" Â°C");  
  mensagem2 = String(temp);
  lcd.setCursor(0,0); 
  lcd.print("Temperatura:"); 
  lcd.setCursor(0,1);           
  lcd.print(mensagem2);
  lcd.write(B11011111);
  lcd.print("C");
  delay(3000);
  lcd.clear();     
}

void display() {
  lcd.setCursor(0,0);          
  lcd.print(mensagem1); 
  lcd.setCursor(0,1);           
  lcd.print(mensagem2);
  delay(3000);
  lcd.clear();
}
